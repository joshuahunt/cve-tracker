
-----------------------------
Stable Kernel Security Notice
2014-07-22

Stable Branch: linux-3.10.y

All linux-3.10.y CVEs:
http://joshuahunt.github.io/cve-tracker/linux-3.10.y-stable-cve-list.html

CVE(s) in report:

CVE-2014-3940
CVE-2014-4027
-----------------------------

Details:

*************
CVE-2014-3940:
*************

---
Description of fix for this vulnerability:
commit d4c54919ed86302094c0ca7d48a8cbd4ee753e92
Author: Naoya Horiguchi <n-horiguchi@ah.jp.nec.com>
Date:   Fri Jun 6 10:00:01 2014 -0400

    mm: add !pte_present() check on existing hugetlb_entry callbacks
    
    The age table walker doesn't check non-present hugetlb entry in common
    path, so hugetlb_entry() callbacks must check it.  The reason for this
    behavior is that some callers want to handle it in its own way.
    
    [ I think that reason is bogus, btw - it should just do what the regular
      code does, which is to call the "pte_hole()" function for such hugetlb
      entries  - Linus]
    
    However, some callers don't check it now, which causes unpredictable
    result, for example when we have a race between migrating hugepage and
    reading /proc/pid/numa_maps.  This patch fixes it by adding !pte_present
    checks on buggy callbacks.
    
    This bug exists for years and got visible by introducing hugepage
    migration.
    
    ChangeLog v2:
    - fix if condition (check !pte_present() instead of pte_present())
    
    Reported-by: Sasha Levin <sasha.levin@oracle.com>
    Signed-off-by: Naoya Horiguchi <n-horiguchi@ah.jp.nec.com>
    Cc: Rik van Riel <riel@redhat.com>
    Cc: <stable@vger.kernel.org> [3.12+]
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    [ Backported to 3.15.  Signed-off-by: Josh Boyer <jwboyer@fedoraproject.org> ]
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

 fs/proc/task_mmu.c |    2 +-
 mm/mempolicy.c     |    6 +++++-
 2 files changed, 6 insertions(+), 2 deletions(-)
---
The following fields have changed: Break Date,Break Commit,Break Tag
Break Date: - -> 2013-09-11
Break Commit: - -> e2d8cf405525d83e6ca42969be460f94b0339798
Break Tag: - -> 3.12

CVE-2014-4027:
*************

---
Description of fix for this vulnerability:
commit 4442dc8a92b8f9ad8ee9e7f8438f4c04c03a22dc
Author: Nicholas Bellinger <nab@linux-iscsi.org>
Date:   Tue Jan 7 22:40:27 2014 +0000

    target/rd: Refactor rd_build_device_space + rd_release_device_space
    
    This patch refactors rd_build_device_space() + rd_release_device_space()
    into rd_allocate_sgl_table() + rd_release_device_space() so that they
    may be used seperatly for setup + release of protection information
    scatterlists.
    
    Also add explicit memset of pages within rd_allocate_sgl_table() based
    upon passed 'init_payload' value.
    
    v2 changes:
      - Drop unused sg_table from rd_release_device_space (Wei)
    
    Cc: Martin K. Petersen <martin.petersen@oracle.com>
    Cc: Christoph Hellwig <hch@lst.de>
    Cc: Hannes Reinecke <hare@suse.de>
    Cc: Sagi Grimberg <sagig@mellanox.com>
    Cc: Or Gerlitz <ogerlitz@mellanox.com>
    Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>

 drivers/target/target_core_rd.c |  113 +++++++++++++++++++++++----------------
 1 file changed, 68 insertions(+), 45 deletions(-)
---
The following fields have changed: Break Date,Break Commit,Break Tag
Break Date: - -> 2011-01-14
Break Commit: - -> c66ac9db8d4ad9994a02b3e933ea2ccc643e1fe5
Break Tag: - -> 2.6
