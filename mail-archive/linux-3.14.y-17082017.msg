
-----------------------------
Stable Kernel Security Notice
2017-08-17

Stable Branch: linux-3.14.y

All linux-3.14.y CVEs:
http://joshuahunt.github.io/cve-tracker/linux-3.14.y-stable-cve-list.html

CVE(s) in report:

CVE-2017-1000111
CVE-2017-1000112
-----------------------------

Details:

*************
CVE-2017-1000111:
*************

*** This is a new CVE ***
---
Description of fix for this vulnerability:
commit c27927e372f0785f3303e8fad94b85945e2c97b7
Author: Willem de Bruijn <willemb@google.com>
Date:   Thu Aug 10 12:41:58 2017 -0400

    packet: fix tp_reserve race in packet_set_ring
    
    Updates to tp_reserve can race with reads of the field in
    packet_set_ring. Avoid this by holding the socket lock during
    updates in setsockopt PACKET_RESERVE.
    
    This bug was discovered by syzkaller.
    
    Fixes: 8913336a7e8d ("packet: add PACKET_RESERVE sockopt")
    Reported-by: Andrey Konovalov <andreyknvl@google.com>
    Signed-off-by: Willem de Bruijn <willemb@google.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

 net/packet/af_packet.c | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)
---
The following fields have changed: Public Date,CVE,Break Date,Break Commit,Break Tag,Linus Fix Date,Linus Commit,Linus Tag,Stable Date,Stable Commit,Stable Tag
Public Date: 2017-08-10
CVE: CVE-2017-1000111
Break Date: 2008-07-18
Break Commit: 8913336a7e8d56e984109a3137d6c0e3362596a4
Break Tag: 2.6
Linus Fix Date: 2017-08-10
Linus Commit: c27927e372f0785f3303e8fad94b85945e2c97b7
Linus Tag: 4.13
Stable Date: -
Stable Commit: -
Stable Tag: -

CVE-2017-1000112:
*************

*** This is a new CVE ***
---
Description of fix for this vulnerability:
commit 85f1bd9a7b5a79d5baa8bf44af19658f7bf77bfa
Author: Willem de Bruijn <willemb@google.com>
Date:   Thu Aug 10 12:29:19 2017 -0400

    udp: consistently apply ufo or fragmentation
    
    When iteratively building a UDP datagram with MSG_MORE and that
    datagram exceeds MTU, consistently choose UFO or fragmentation.
    
    Once skb_is_gso, always apply ufo. Conversely, once a datagram is
    split across multiple skbs, do not consider ufo.
    
    Sendpage already maintains the first invariant, only add the second.
    IPv6 does not have a sendpage implementation to modify.
    
    A gso skb must have a partial checksum, do not follow sk_no_check_tx
    in udp_send_skb.
    
    Found by syzkaller.
    
    Fixes: e89e9cf539a2 ("[IPv4/IPv6]: UFO Scatter-gather approach")
    Reported-by: Andrey Konovalov <andreyknvl@google.com>
    Signed-off-by: Willem de Bruijn <willemb@google.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

 net/ipv4/ip_output.c  | 8 +++++---
 net/ipv4/udp.c        | 2 +-
 net/ipv6/ip6_output.c | 7 ++++---
 3 files changed, 10 insertions(+), 7 deletions(-)
---
The following fields have changed: Public Date,CVE,Break Date,Break Commit,Break Tag,Linus Fix Date,Linus Commit,Linus Tag,Stable Date,Stable Commit,Stable Tag
Public Date: 2017-08-10
CVE: CVE-2017-1000112
Break Date: 2005-10-28
Break Commit: e89e9cf539a28df7d0eb1d0a545368e9920b34ac
Break Tag: 2.6
Linus Fix Date: 2017-08-10
Linus Commit: 85f1bd9a7b5a79d5baa8bf44af19658f7bf77bfa
Linus Tag: 4.13
Stable Date: -
Stable Commit: -
Stable Tag: -
